using NUnit.Framework;

namespace NewToDo.Tests
{
    [TestFixture]
    public class TaskServiceTests
    {
        private TaskService service;
        private string testFile = "tasks.txt";

        [SetUp]
        public void Setup()
        {
            if (File.Exists(testFile)) 
            {  File.Delete(testFile); }

            service = new TaskService();
        }

        [Test]
        public void AddTask_ShouldAddTask()
        {
            //Arrenge from SetUp
            //Act
            service.AddTask("Homework");
            //Assert
            var tasks = service.GetAllTasks();
            Assert.That(1, Is.EqualTo(tasks.Count));
            Assert.That("Homework", Is.EqualTo(tasks[0].Name));
            Assert.That(tasks[0].IsCompleted, Is.False);
        }
        [Test]
        public void AddTask_InvalidName_ShouldThrowException()
        {
            // Arrange
         

            // Act + Assert (проверяваме дали методът хвърля изключение)
            try
            {
                service.AddTask("  "); // празно име
                Assert.Fail("Expected exception not thrown");
            }
            catch (ArgumentException)
            {
                Assert.Pass();
            }

            try
            {
                service.AddTask("ab"); // твърде късо име
                Assert.Fail("Expected exception not thrown");
            }
            catch (ArgumentException)
            {
                Assert.Pass();
            }
        }

    }
}
